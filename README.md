# NEST Fi User Guide

## Concept

### Introduction

In the traditional financial market, i.e. CeFi (or “centralized finance”), financial intermediaries are responsible for maintaining the fairness of the trading; they are the deal makers who help the traders to find the matched counterparties. In other situations, they are also responsible for pricing financial products. The financial intermediaries include diverse exchanges and dealmakers of the loan and asset auction market. Together, they boost the efficiency of financial trading to the extreme. For instance, driven by high-frequency trading, the exchanges allow the frequencies of their order flow to arrive in nanoseconds. Although the traditional financial market has improved its efficiency, the credit risk within also increases. The inevitable hosting problem and the intervention of the financial intermediary will raise the implicit costs of financial transactions. These problems account for the main reason for
developing DeFi (or “decentralized finance”). 

![image1](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG1.png)

> Figure 1: Diagram of CeFi

If Alice, a trader, wants to buy, sell some asset, or open a position in a centralized Financial market, she needs to go to a financial intermediary, centralized exchange in this case. After filling her required trading in an order table, the exchange will public her order and find counterparties for Alice. The diagram of this process is exhibited in Figure 1.

DeFi is an umbrella term for financial services on public blockchains. With DeFi, participants can do most things that banks support, earn interest, borrow, lend, buy insurance, trade derivatives, trade assets, and more, but it’s faster and doesn’t require paperwork or a third party. As with crypto generally, DeFi is global, peerto-peer (meaning directly between two people, not routed through a centralized system), pseudonymous, and open to all.

The first generation of DeFi (DeFi 1.0) projects is based on the traditional approach of order books. For example, EtherDelta, the EtherDelta exchange, is a cryptocurrency trading platform based on the Ethereum blockchain and ERC20 standard tokens. It is worth noting that the exchange was established in Chicago in 2017. The platform is based on smart contracts, with the help of which all contracts are carried out inside the website (purchase, sale, withdrawal of funds from the wallet, etc.). Since every order has been written into a contract, waiting for counterparties, this approach is very inefficient and naturally creates a barrier to improving the market’s liquidity. The problem of DeFi 1.0 includes

- the liquidity on the chain cannot be effectively ensured;
- finding the final matched counterparties still needed for centralized institutions;
- once a price deviates from the actual value, the gas fee cost of order adjustment is high.

![image2](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG2.png)

This traditional financial approach is not appropriate for on-chain applications. We extend our story of Alice trying to trade with a DeFi 1.0 platform. She can participate in a smart contract that specifies her request and wait for counterparties to notice her order contract. The diagram of this process is exhibited in Figure 2.

The second generation of DeFi (DeFi 2.0) introduced automated market maker (AMM) model makes decentralized exchange (DEX, e.g., Uniswap, Sushiswap, etc.) possible and lending projects. DEXs have improved the liquidity of the DeFi contracts and allow users to deposit tokens to earn trading fees. Lending projects (e.g.,Aave, Compound, etc.) provide the users a platform to earn from providing liquidity and to borrow. Projects like MakerDao vitalize the DeFi market by allowing users to generate a kind of decentralized stablecoin. This kind of stablecoin is available to anyone, anywhere; like Dai (generated by MakerDAO) is backed by a surplus of collateral that has been individually escrowed into audited and publicly viewable Ethereum smart contracts. DeFi 2.0 led to a rising wave in the crypto market in 2020 since DeFi 2.0 projects provided a better solution to the fundamental problem of the DeFi industry: lack of liquidity. 

![image3](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG3.png)

> Figure 3: Diagram of DeFi 2.0

With a DeFi 2.0 platform. Alice can directly trade assets with the asset pools deposited by liquidity providers by participating in a smart contract. The diagram of this process is exhibited in Figure 3.

However, whether it is AMM or liquidity pools, the solution to the liquidity problems is at the expense of the liquidity provider’s flexibility: a liquidity provider needs to fix his trading strategy and bear the external market fluctuations. Once the price is favorable to the liquidity provider, the counterparty trader can opt to back out of the deal. Once an arbitrage opportunity appears, the arbitragers flock in and cause impermanent losses to the liquidity providers. The liquidity providers has no choice but to hop for subsidies from mining, and commission or interest earned can compensate their losses. Although this asymmetric design temporarily alleviates the liquidity shortage, it generates the following problems in the long run: Firstly, many assets are occupied and deposited in DeFi protocols. At the same time, only a small volume of transactions is supported, which results in resource wasting. Most of the total value locked (TVL) is still rushing to liquidity mining for profits. In the long term, the lower the capital utilization rate, the greater the loss of the intrinsic value of the DeFi products. Secondly, in the AMM, the core variables, such as asset price and interest rate, are related to the size of the pool. When the size is small, it is easy to create arbitrage opportunities by high volume trading on one hand, and it is difficult to attract many traders and lenders when the pool is not large enough on the other hand. Moreover, DeFi products’ composability and liquidity sharing are only at the technical level since the TVL of various DeFi platforms cannot be shared. This kind of liquidity created at the expense of sacrificing the liquidity providers’ flexibility is not a perfect idea under the decentralized architecture.

It is better to erase this asymmetry between liquidity providers and other traders. Creating a brand new form of Defi 3.0: the system plays the role of the counterparty to all traders. This idea complies with the decentralized spirit. Everyone is in the same position to gamble with the smart contract, whether the underlying asset is Bitcoin, Ethereum, or other crypto-assets. The system burns the tokens immediately after any participant pays the system tokens for some financial products, and minting system tokens will settle the income of the financial products. We call this model ILM (Infinite Liquidity Model). It frees us from the traditional financial trading models. It forms a new financial paradigm that not only ensures composability but also uniforms programmability for all DeFi products within the same framework.

![image4](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG4.png)

> Figure 4: Diagram of DeFi 3.0

With Defi 3.0, Alice can now directly trade with the system by participating in a smart contract. The system will be her counterparty in this situation. The diagram of this process is exhibited in Figure 4.

### NEST Probability Virtual Machine

NEST Probability Virtual Machine (PVM) is a virtual machine-like structure based on the basic function library. Developers can develop various exciting applications based on the function library, similar to Ethereum virtual machine (EVM) programming.

NEST inherited the genes of Ethereum. The essence of EVM is that each program is a combination of some basic codes, which can be called as long as a certain gas fee is paid. The income of each product on the PVM can be regarded as a linear combination of some basic income functions, and this income can be obtained as long as a certain cost (that is, the discounted value of this income) is paid. The underlying logic of PVM is the same as that of EVM, which means that all EVM development can be implemented on PVM.

Check the PVM's [whitepaper](https://finance.nestprotocol.org/The_White_Paper_of_NEST_PVM.pdf) for more details.

## How to Play

### Connect Wallet

1. Open [NEST Fi official website](https://finance.nestprotocol.org/#/futures), choose the network you want to trade on, e.g. BSC (Binance Smart Contract Chain). 
2. Then click the "Connect Wallet" button to connect to your wallet.
3. If your balance of NEST is lower than 1, you should use Swap function or buy NEST from exchange to add enough NEST for trading. 
  - If you have not added NEST token to your wallet, when your mouse hovered on "Balance", the "Add NEST to your wallet" will show, click it and the NEST token will be added to your wallet.

![image5](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG5.png)

### Swap

You can switch to "Swap" tab to exchange between USDT and NEST token. The exchange rate is based on AMM mechanism, thus it will slightly vary from the centralized exchanges. 

![image6](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG6.png)

### Futures

You can use NEST to buy ETH/USDT and BTC/USDT futures here, up to 5x leverage. 

The following steps show you how to buy  futures on NEST Fi:

1. The market price of token pair is from [NEST Oracle](https://nestprotocol.org/#/docs/NEST-Oracle/Concept.md), a truly decentralized oracle. The opening price varies slightly from  the price NEST oracle provides according to risk compensation.
2. Choose "Long" or "Short", and the leverage you want to use.
3. Then, input the amount of NEST as collateral for this future, minimum 50 NEST.
4. Approve and open the position.


![image7](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG7.png)

After you open the position successfully, the detail of your position will shows at the bottom of the page. You can close your future position at any time you want. 

![image8](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG8.png)

### Options

NEST Fi's options are based on NEST Probability Virtual Machine (PVM), which provides options with infinite liquidity. NEST Fi support ETH/USDT and BTC/USDT options.

The following steps show you how to buy options on NEST Fi:

1. Similar to the future, option's market price of token pair is also from [NEST Oracle](https://www.nestprotocol.org/).
2. Choose "Call" or "Put" option you want to buy.
3. Choose the exercise time and strike price of the option. You should know, NEST Fi's options are [European Option](https://www.investopedia.com/terms/e/europeanoption.asp#:~:text=A%20European%20option%20is%20a,of%20or%20sell%20the%20shares.). 
  - Exercise Time: You cannot strike your option until this date, but you can sell this option to NEST Fi network before the exercise time.
  - Strike Price: The final payoff depends on the strike price.
4. Then, input the amount of NEST as your payment and the option shares will show on the right. 

![image9](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG9.png)

5. Approve and buy the option.

![image10](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG10.png)

After you buy the option successfully, the detail of your position will shows at the bottom of the page. You can sell your option before exercise time. 

![image11](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG11.png)

### Win

In the WIN game, you can game with NEST network.

1. Adjust the multiplier you want, and the multiplier is related to the winning chance . You should notice that higher multiplier, higher risk.  E.g. If the multiplier is 2, the winning chance will be 50%. If the multiplier is 10, the winning chance is 10%.
2. Adjust your bet amount, you can only use NEST to bet.
3. Approve and roll. First click the "Approve" button to approve this trade . After you finish the approve, the button will change to "Roll", then click the "Roll" button to play the game. The result will be popup on the page. 

![image12](https://raw.githubusercontent.com/NEST-Protocol/NEST-Fi-User-Guide/main/Image/NFUG12.png)